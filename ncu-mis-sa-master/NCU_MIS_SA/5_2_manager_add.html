<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>管理者新增頁面</title>
    <style>
        body {
            text-align: center;
            margin: 0;
            padding: 0;
        }
        h1 {
            color: white;
            font-size: 3em;
            margin-top: 0;
            margin-bottom: 40px;
			padding: 5px;
        }
        form {
            margin-top: 20px;
        }
        label {
            display: block;
            margin-bottom: 10px;
            color: black;
            font-size: 1.2em;
        }
        input {
            width: 300px;
            height: 40px;
            padding: 5px;
            font-size: 1em;
            border: 1px solid #004B97;
            border-radius: 5px;
        }
        input[type="text"],
        input[type="email"],
        input[type="password"] {
            width: 300px;
            height: 40px;
            padding: 5px;
            font-size: 1em;
            border: 1px solid #004B97;
            border-radius: 5px;
        }
        input[type="submit"] {
            background-color: #004B97;
            color: white;
            cursor: pointer;
            width: 100px; /* Adjusted width */
        }
    </style>
</head>
<body>
    <div style="background-color:#004B97;"><h1><b>新增管理者</b></h1></div>
    <form>
        <label for="name">Name:</label>
        <br>
        <input type="text" id="name" name="name" placeholder="請輸入姓名" required>
        <br><br>
        <label for="email">Email:</label>
        <br>
        <input type="email" id="email" name="email" placeholder="請輸入Email" required>
        <br><br>
        <label for="password">Password:</label>
        <br>
        <input type="text" id="password" name="password" placeholder="請輸入密碼" required>
        <br><br>
        <input type="submit" value="新增"><!--驗證管理者資料庫是否已有這筆資料，若有則顯示「管理者已存在」；若無則顯示「新增成功！」提示，並將這筆資料新增到manager資料庫中-->
    </form>
</body>
  <script type="text/javascript">
                $(document).ready(function() {
                    // 處理表單點擊事件
                    var $form = $('#submit');
                    $form.click(function() {
                        submit();
                    });
                  
                    function submit() {
                        var name = $('#admin_name').val();
                        var mail = $('#admin_mail').val();
                        var password = $('#admin_password').val();

                        var email_rule = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z]+$/;
                        var password_rule = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;

                        if (!email_rule.test(email)) {
                            alert("Email格式不符！");
                        }
                        else if(!password_rule.test(password)) {
                            alert("密碼格式不符，長度至少8，且至少包含一個數字和英文字母！");
                        } else {
                            // 將資料組成JSON格式
                            var data_object = {
                                "admin_name": admin_name,
                                "admin_mail": admin_mail,
                                "admin_password": admin_password
                            };
                            // 將資料組成JSON格式
                             var data_object = {
                                "admin_name": admin_name,
                                "admin_mail": admin_mail,
                                "admin_password": admin_password,
                           };

                            // 將JSON格式轉換成字串
                            var data_string = JSON.stringify(data_object);

                            // 發出POST的AJAX請求
                            $.ajax({
                                    type: "POST",
                                    url: "api/administrator.do",
                                    data: data_string,
                                    crossDomain: true,
                                    cache: false,
                                    dataType: 'json',
                                    timeout: 5000,
                                    success: function (response) {
                                        $('#flashMessage').html(response.message);
                                        $('#flashMessage').show();
                                        if(response.status == 200){
                                            alert("新增成功");
                                        }
                                    },
                                    error: function () {
                                        alert("無法連線到伺服器！");
                                    }
                            });
                        }
                    }
                });
    </script>
</html>



